<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin</title>
    <style>
        body { background: #1a1a2e; color: white; font-family: sans-serif; padding: 20px; max-width: 500px; margin: 0 auto; }
        h2 { border-bottom: 1px solid #333; padding-bottom: 10px; color: #ff4d6d; }
        label { display: block; margin-top: 15px; font-size: 0.9rem; color: #aaa; }
        input, textarea { width: 100%; padding: 10px; margin-top: 5px; background: #0f0c29; border: 1px solid #444; color: white; border-radius: 5px; }
        button { background: #ff4d6d; color: white; border: none; padding: 10px 20px; margin-top: 15px; border-radius: 5px; cursor: pointer; width: 100%; font-weight: bold; }
        button:hover { background: #ff1f4b; }
        .section { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; margin-bottom: 30px; }
    </style>
</head>
<body>

    <h1>ðŸ”§ Control Center</h1>

    <div class="section">
        <h2>Update Missions</h2>
        
        <label>Bubu's Mission Name:</label>
        <input type="text" id="bubuText" placeholder="e.g. Solids Exam">
        <label>Bubu's Due Date:</label>
        <input type="date" id="bubuDate">

        <label>Mumu's Mission Name:</label>
        <input type="text" id="mumuText" placeholder="e.g. Project Submission">
        <label>Mumu's Due Date:</label>
        <input type="date" id="mumuDate">

        <button onclick="saveFocus()">Save Missions</button>
    </div>

    <div class="section">
        <h2>Add Timeline Event</h2>
        <label>Event Date:</label>
        <input type="date" id="eventDate">
        <label>Description:</label>
        <input type="text" id="eventTitle" placeholder="e.g. First Video Call">
        <button onclick="addEvent()">Add to Timeline</button>
    </div>

    <div class="section">
        <h2>Add to Memory Box</h2>
        <textarea id="newMemory" rows="3" placeholder="Type a cute memory..."></textarea>
        <button onclick="addMemory()">Add Memory</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBznon9j3zMoqT24mWZci29cfGGw41bT-U",
            authDomain: "st-pro-fd169.firebaseapp.com",
            databaseURL: "https://st-pro-fd169-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "st-pro-fd169",
            storageBucket: "st-pro-fd169.firebasestorage.app",
            messagingSenderId: "197475448314",
            appId: "1:197475448314:web:80500f982485c10bf32043"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // SAVE FOCUS
        window.saveFocus = function() {
            set(ref(db, 'focus'), {
                bubuText: document.getElementById('bubuText').value,
                bubuDate: document.getElementById('bubuDate').value,
                mumuText: document.getElementById('mumuText').value,
                mumuDate: document.getElementById('mumuDate').value
            });
            alert("Missions Updated!");
        }

        // ADD EVENT
        window.addEvent = function() {
            const date = document.getElementById('eventDate').value;
            const title = document.getElementById('eventTitle').value;
            if(date && title) {
                // Use date as key to sort automatically
                set(ref(db, `timeline/${date}`), { date, title });
                alert("Timeline Updated!");
                document.getElementById('eventTitle').value = "";
            }
        }

        // ADD MEMORY
        window.addMemory = function() {
            const mem = document.getElementById('newMemory').value;
            if(mem) {
                push(ref(db, 'memories'), mem);
                alert("Memory Added!");
                document.getElementById('newMemory').value = "";
            }
        }
    </script>
</body>
</html>
